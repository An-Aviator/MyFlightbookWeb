ALTER TABLE `logbook`.`flights` 
ADD COLUMN `FlightHash` VARCHAR(1024) NULL COMMENT 'Hash of the flight (for signatures)'  AFTER `telemetry` , 
ADD COLUMN `SignatureHash` VARCHAR(255) NULL COMMENT 'Encrypted CFIUsername+Certificate+Expiration+SignatureDate, to detect tampering there.' AFTER `FlightHash`, 
ADD COLUMN `CFIComment` VARCHAR(255) NULL COMMENT 'CFI\'s comment'  AFTER `SignatureHash` , 
ADD COLUMN `SignatureDate` DATE NULL DEFAULT NULL COMMENT 'Date of the signature'  AFTER `CFIComment` , 
ADD COLUMN `CFICertificate` VARCHAR(45) NULL COMMENT 'CFI Certificate number'  AFTER `SignatureDate` , 
ADD COLUMN `CFIExpiration` DATE NULL COMMENT 'Expiration of CFI\'s certificate'  AFTER `CFICertificate` , 
ADD COLUMN `CFIUserName` VARCHAR(255) NULL COMMENT 'Username of CFI'  AFTER `CFIExpiration` , 
ADD COLUMN `CFIEmail` VARCHAR(255) NULL COMMENT 'Email of CFI at time of signing'  AFTER `CFIUserName` ,
ADD COLUMN `CFIName` VARCHAR(65) NULL COMMENT 'Name of CFI at time of signing'  AFTER `CFIEmail`,
ADD COLUMN `SignatureState` INT NULL DEFAULT 0 COMMENT 'State of the signature for this flight: 0 = none, 1 = valid, 2 = invalid'  AFTER `CFIName` ;

/* add digitized signatures (i.e., PNG images) */
ALTER TABLE `logbook`.`flights` ADD COLUMN `DigitizedSignature` MEDIUMBLOB NULL DEFAULT NULL COMMENT 'Digitization of a signature'  AFTER `CFIName` , CHANGE COLUMN `SignatureState` `SignatureState` INT(11) NULL DEFAULT '0' COMMENT 'Digitization of a signature, when no relationship is present.'  ;
